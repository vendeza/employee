<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <br>
        <div class="row">
            <div class="col-md-3">Сотрудник

            </div>
            <div class="col-md-3"><button id="person" type="button" class="btn btn-primary" data-toggle="modal"
                    data-target="#myModal">Выбрать</button>
                <p id="selectedPerson"></p>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-3">Должность</div>
            <div class="col-md-3"><button type="button" id="position" type="button" class="btn btn-primary"
                    data-toggle="modal" data-target="#myModal">Выбрать</button>
                <p id="selectedPosition"></p>
            </div>
        </div>
        <br>
        <div class=" row">
            <div class="col-md-3">Организация</div>
            <div class="col-md-3"><button type="button" class="btn btn-primary" id="orgs" data-toggle="modal"
                    data-target="#myModal">Выбрать</button>
                <p id="selectedOrgs"></p>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-3">Подразделение</div>
            <div class="col-md-3"><button type="button" class="btn btn-primary" id="subs" data-toggle="modal"
                    data-target="#myModal">Выбрать</button>
                <p id="selectedSubs"></p>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Modal Header</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>

                </div>
                <div id="tableData" class="modal-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>id</th>
                                <th>Фамилия</th>
                                <th>Имя</th>
                                <th>Отчество</th>
                                <th>Дата рождения</th>
                            </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                    </table>

                </div>
                <div class="modal-footer">
                    <button type="button" id="ok" class="btn btn-primary" data-dismiss="modal"
                        data-dismiss="modal">OK</button>
                    <button type="button" id="close" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
    <script>
       
        var windowId;
        $('#myModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget) // Button that triggered the modal
            var recipient = button.data('whatever') // Extract info from data-* attributes
            var buttonId = button[0].id;
            windowId = buttonId;

            var modal = $(this);
            if (buttonId === 'person') {
                $.getJSON("persons.json", function (data) {
                    console.log(data);
                    data.forEach(function (i, index) {
                        $('#tableData table').append('<tr data-id=' + i.id + '" class="clickable-row"><td>' + i.lastname + '</td><td>' + i.middlename + '</td><td>' + i.firstname + '</td><td>' + i.birthday + '</td></tr>');
                    })
                });
            }
            if (buttonId === 'position') {
                $.getJSON("persons.json", function (data) {
                    console.log(data);
                    data.forEach(function (i, index) {
                        $('#tableData table').append('<tr data-id=' + i.id + '" class="clickable-row"><td>' + i.lastname + '</td><td>' + i.middlename + '</td><td>' + i.firstname + '</td><td>' + i.birthday + '</td></tr>');
                    })
                });
            }
            if (buttonId === 'orgs') {
                $.getJSON("persons.json", function (data) {
                    console.log(data);
                    data.forEach(function (i, index) {
                        $('#tableData table').append('<tr data-id=' + i.id + '" class="clickable-row"><td>' + i.lastname + '</td><td>' + i.middlename + '</td><td>' + i.firstname + '</td><td>' + i.birthday + '</td></tr>');
                    })
                });
            }
            if (buttonId === 'subs') {
                $.getJSON("persons.json", function (data) {
                    console.log(data);
                    data.forEach(function (i, index) {
                        $('#tableData table').append('<tr data-id=' + i.id + '" class="clickable-row"><td>' + i.lastname + '</td><td>' + i.middlename + '</td><td>' + i.firstname + '</td><td>' + i.birthday + '</td></tr>');
                    })
                });
            }
        });

       
        var selectedPerson;
        var selectedPosition;
        var selectedOrgs;
        var selectedSubs;

        $('#myModal .modal-footer button').on('click', function (event) {
            var $button = $(event.target);
            console.log($button[0].id, " $(event");
            console.log(selectedPerson);
            if (windowId === 'person') {
                $('#selectedPerson').text(selectedPerson);
            }
            if (windowId === 'position') {
                $('#selectedPosition').text(selectedPerson);
            }
            if (windowId === 'orgs') {
                $('#selectedOrgs').text(selectedPerson);
            }
            if (windowId === 'subs') {
                $('#selectedSubs').text(selectedPerson);
            }
        });

        

        $('#tableData').on('click', '.clickable-row', function (event) {
            $(this).addClass('active').siblings().removeClass('active');
            selectedPerson = $(this).attr('data-id');
            console.log(selectedPerson);
        });
    </script>
    
    <style>
        .clickable-row.active {
            background-color: #aaa !important;
        }

        .modal-body {
            height: 400px;
            overflow: auto;
        }
    </style>
</body>

</html>